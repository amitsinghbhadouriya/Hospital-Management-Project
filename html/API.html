<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

    <!-- Boxicons -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/styles.css" />

    <!-- Chat Styles -->
    <style>
        /* Chat message styles */
        .message {
            margin-bottom: 15px;
            max-width: 85%;
            word-wrap: break-word;
        }

        .message.user {
            margin-left: auto;
            background-color: #0d6efd;
            color: white;
            border-radius: 18px 18px 0 18px;
            padding: 10px 15px;
        }

        .message.bot {
            margin-right: auto;
            background-color: #f0f2f5;
            color: #212529;
            border-radius: 18px 18px 18px 0;
            padding: 10px 15px;
        }

        .bot-name {
            font-weight: bold;
            color: #0d6efd;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        /* Ensure the chat container scrolls properly */
        #chatMessages {
            scroll-behavior: smooth;
            padding: 15px;
        }

        /* Pulse animation for typing indicator */
        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.5;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }

            100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
        }
    </style>

    <title>Chatbot | HealthBridge - Your Digital Healthcare Companion</title>

<style>
    /* Enhanced chat message styles */
    .message {
        margin-bottom: 15px;
        max-width: 85%;
        word-wrap: break-word;
        animation: fadeIn 0.3s ease-in;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .message.user {
        margin-left: auto;
        background: linear-gradient(135deg, #0d6efd, #0b5ed7);
        color: white;
        border-radius: 18px 18px 4px 18px;
        padding: 12px 16px;
        box-shadow: 0 2px 8px rgba(13, 110, 253, 0.3);
    }
    
    .message.bot {
        margin-right: auto;
        background-color: #f8f9fa;
        color: #212529;
        border-radius: 18px 18px 18px 4px;
        padding: 12px 16px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .bot-name {
        font-weight: bold;
        color: #0d6efd;
        margin-bottom: 5px;
        font-size: 0.85rem;
    }
    
    /* Ensure proper scrolling */
    #chatMessages {
        scroll-behavior: smooth;
        scrollbar-width: thin;
        scrollbar-color: #dee2e6 transparent;
    }
    
    #chatMessages::-webkit-scrollbar {
        width: 6px;
    }
    
    #chatMessages::-webkit-scrollbar-track {
        background: transparent;
    }
    
    #chatMessages::-webkit-scrollbar-thumb {
        background-color: #dee2e6;
        border-radius: 3px;
    }
    
    #chatMessages::-webkit-scrollbar-thumb:hover {
        background-color: #adb5bd;
    }
    
    /* Pulse animation for typing indicator */
    @keyframes pulse {
        0% { transform: scale(0.8); opacity: 0.5; }
        50% { transform: scale(1.2); opacity: 1; }
        100% { transform: scale(0.8); opacity: 0.5; }
    }
    
    /* Input focus effects */
    #messageInput:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
    }
    
    /* Button hover effects */
    .btn-outline-primary:hover {
        transform: translateY(-1px);
        transition: all 0.2s ease;
    }
    
    /* Mobile responsiveness */
    @media (max-width: 768px) {
        .card {
            height: 70vh !important;
            margin: 10px;
        }
        
        .message {
            max-width: 95%;
        }
        
        .row.g-1 .col-6 {
            margin-bottom: 5px;
        }
        
        .btn-sm {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
        }
    }
    
    /* Fix for chat container positioning */
    #chat-section {
        min-height: 100vh;
        display: flex;
        align-items: center;
    }
    
    /* Ensure the chat card stays centered and accessible */
    .card.shadow-lg {
        position: relative;
        display: flex;
        flex-direction: column;
    }
</style>
</head>

<body>
     <!-- Login Modal -->
    <div class="modal fade" id="login" tabindex="-1" aria-labelledby="loginLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow rounded-4">

                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold text-primary" id="loginLabel">Login to HealthBridge</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body pt-0">
                    <form action="#" method="post" class="p-3" autocomplete="on" novalidate>
                        <div class="mb-4">
                            <label for="usernameOrEmail" class="form-label fw-semibold">Username or Email</label>
                            <input type="text" id="usernameOrEmail" name="usernameOrEmail" class="form-control"
                                placeholder="Enter your username or email" required autocomplete="username"
                                aria-describedby="usernameHelp">
                            <div id="usernameHelp" class="form-text">We'll never share your info.</div>
                        </div>

                        <div class="mb-4 position-relative">
                            <label for="password" class="form-label fw-semibold">Password</label>
                            <input type="password" id="password" name="password" class="form-control"
                                placeholder="Enter your password" required autocomplete="current-password"
                                aria-describedby="showPasswordToggle">
                        </div>

                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <input type="checkbox" id="rememberMe" name="rememberMe" class="form-check-input">
                                <label for="rememberMe" class="form-check-label">Remember me</label>
                            </div>
                            <a href="#" class="text-decoration-none">Forgot Password?</a>
                        </div>

                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary btn-lg fw-bold shadow-sm">Login</button>
                        </div>
                    </form>
                </div>

                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signup" tabindex="-1" aria-labelledby="signuplabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow rounded-4">

                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold text-primary" id="signuplabel">Create Your Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body pt-0 px-4">
                    <form action="#" method="POST" novalidate autocomplete="on">
                        <div class="mb-3 position-relative">
                            <label for="fullName" class="visually-hidden">Full Name</label>
                            <input type="text" id="fullName" name="name" class="form-control ps-5"
                                placeholder="Full Name" required autocomplete="name" aria-describedby="nameHelp" />
                            <i class='bx bx-user position-absolute top-50 translate-middle-y'
                                style="left: 15px; font-size: 1.2rem; color: #6c757d;"></i>
                        </div>

                        <div class="mb-3 position-relative">
                            <label for="email" class="visually-hidden">Email Address</label>
                            <input type="email" id="email" name="email" class="form-control ps-5" placeholder="Email"
                                required autocomplete="email" aria-describedby="emailHelp" />
                            <i class='bx bx-envelope position-absolute top-50 translate-middle-y'
                                style="left: 15px; font-size: 1.2rem; color: #6c757d;"></i>
                        </div>

                        <div class="mb-3 position-relative">
                            <label for="password" class="visually-hidden">Password</label>
                            <input type="password" id="password" name="password" class="form-control ps-5"
                                placeholder="Password" required autocomplete="new-password"
                                aria-describedby="passwordHelp" />
                            <i class='bx bx-lock-alt position-absolute top-50 translate-middle-y'
                                style="left: 15px; font-size: 1.2rem; color: #6c757d;"></i>

                        </div>
                        <div id="passwordHelp" class="form-text mb-3">Use at least 8 characters with letters and
                            numbers.</div>

                        <div class="mb-4 position-relative">
                            <label for="confirmPassword" class="visually-hidden">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirm_password"
                                class="form-control ps-5" placeholder="Confirm Password" required
                                autocomplete="new-password" />
                            <i class='bx bx-lock position-absolute top-50 translate-middle-y'
                                style="left: 15px; font-size: 1.2rem; color: #6c757d;"></i>
                        </div>

                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary fw-semibold btn-lg shadow-sm">Sign Up</button>
                        </div>
                    </form>

                    <div class="text-center mb-3">
                        <small class="text-muted">
                            Already have an account?
                            <a href="#" class="text-primary text-decoration-none" data-bs-dismiss="modal"
                                data-bs-toggle="modal" data-bs-target="#login">Login here</a>
                        </small>
                    </div>
                </div>

                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Main Navigation Header -->
    <header class="sticky-top main-header shadow-sm">
        <nav class="navbar navbar-expand-lg navbar-light container-fluid">
            <div class="container py-2">
                <a href="../index.html" class="navbar-brand d-flex align-items-center">
                    <h3 class="mb-0 fw-bold text-primary">HealthBridge</h3>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#MobileMenu"
                    aria-controls="MobileMenu">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse justify-content-between ms-5">
                    <!-- Main Links -->
                    <ul class="navbar-nav gap-3">
                        <li class="nav-item"><a class="nav-link without-arrow fw-semibold" href="../index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link without-arrow fw-semibold"
                                href="about.html">About</a></li>
                        <li class="nav-item"><a class="nav-link without-arrow  fw-semibold"
                                href="services.html">Services</a></li>
                        <li class="nav-item"><a class="nav-link without-arrow fw-semibold"
                                href="contact.html">Contact</a>
                        </li>
                    </ul>

                    <!-- Search Bar -->
                    <form class="d-none d-lg-flex me-3 gap-1" role="search">
                        <div class="position-relative" style="max-width: 300px;">
                            <input class="form-control ps-5 shadow-sm" type="search" placeholder="Search..."
                                aria-label="Search" id="searchInput">
                            <i class='bx bx-search position-absolute top-50 translate-middle-y'
                                style="left: 15px; font-size: 1.2rem; color: #6c757d;"></i>
                        </div>

                        <button class="btn btn-outline-dark" type="submit">Search</button>
                    </form>

                    <!-- Account Buttons -->
                    <div class="d-none d-lg-flex align-items-center gap-1">
                        <button type="button" data-bs-toggle="modal" data-bs-target="#login"
                            class="btn btn-outline-dark">Login</button>
                        <button type="button" data-bs-toggle="modal" data-bs-target="#signup"
                            class="btn btn-primary text-white">Sign Up</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Secondary Navigation -->
        <div class="second-header shadow-sm py-2 d-none d-lg-block">
            <div class="container">
                <ul class="nav justify-content-center gap-4">

                    <!-- Appointment Booking bar -->
                    <li class="nav-item"><a class="nav-link without-arrow  fw-semibold"
                            href="appointment-booking.html">Appointment Booking</a>
                    </li>

                    <!-- Hospital bar -->
                    <li class="nav-item dropdown"><a class="nav-link fw-semibold d-flex align-items-center gap-1"
                            href="#">
                            Hospitals <i class='bx bx-chevron-up arrow-icon fs-4'></i></a>
                        <ul class="dropdown-menu shadow rounded-3">

                            <!-- Submenu: Apollo -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle"
                                    href="https://www.apollohospitals.com/">Apollo</a>
                            </li>

                            <!-- Submenu: AIIMS -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="https://www.aiims.edu/">AIIMS</a>
                            </li>

                            <!-- Submenu: Fortis -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle"
                                    href="https://www.fortishealthcare.com/">Fortis</a>
                            </li>

                            <!-- Submenu: Medanta -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="https://www.medanta.org/">Medanta</a>
                            </li>

                            <!-- Submenu: BLK-MAX -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="https://www.blkmaxhospital.com/">BLK
                                    Super</a>
                            </li>

                            <!-- Submenu: others -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Others</a>
                                <ul class="dropdown-menu shadow rounded-3 position-absolute start-10 top-0 mt-0">
                                    <li><a class="dropdown-item" href="https://www.artemishospitals.com/">Artemis</a>
                                    </li>
                                    <li><a class="dropdown-item"
                                            href="https://www.wockhardthospitals.com/">Wockhardt</a></li>
                                    <li><a class="dropdown-item" href="https://www.narayanahealth.org/">Narayana</a>
                                    </li>
                                    <li><a class="dropdown-item" href="https://www.maxhealthcare.in/">Max Hospital</a>
                                    </li>
                                    <li><a class="dropdown-item" href="https://www.carehospitals.com/">Care Hospital</a>
                                    </li>
                                    <li><a class="dropdown-item" href="https://www.marengoasiahospitals.com/">Marengo
                                            Asia</a></li>
                                    <li><a class="dropdown-item" href="https://billrothhospitals.com/">Billroth</a></li>
                                    <li><a class="dropdown-item" href="#">More</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <!-- Doctor bar -->
                    <li class="nav-item dropdown"><a class="nav-link fw-semibold d-flex align-items-center gap-1"
                            href="#">
                            Doctors <i class='bx bx-chevron-up arrow-icon fs-4'></i></a>
                        <ul class="dropdown-menu shadow rounded-3">

                            <!-- Submenu: Neurologist -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Neurologist</a>
                            </li>

                            <!-- Submenu: Dermatologist -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Dermatologist</a>
                            </li>

                            <!-- Submenu: Cardiologist -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Cardiologist</a>
                            </li>

                            <!-- Submenu: Allergists -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Allergists</a>
                            </li>

                            <!-- Submenu: others -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Others</a>
                                <ul class="dropdown-menu shadow rounded-3 position-absolute start-10 top-0 mt-0">
                                    <li><a class="dropdown-item" href="#">Anesthesiologist</a></li>
                                    <li><a class="dropdown-item" href="#">Family Physicians</a></li>
                                    <li><a class="dropdown-item" href="#">Gastroenterologist</a></li>
                                    <li><a class="dropdown-item" href="#">Endocrinologist</a></li>
                                    <li><a class="dropdown-item" href="#">Hematologist</a></li>
                                    <li><a class="dropdown-item" href="#">Nephrologist</a></li>
                                    <li><a class="dropdown-item" href="#">Surgeon</a></li>
                                    <li><a class="dropdown-item" href="#">More</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <!-- Medical bar -->
                    <li class="nav-item dropdown">
                        <a class="nav-link fw-semibold d-flex align-items-center gap-1" href="#">
                            Medicals<i class='bx bx-chevron-up arrow-icon fs-4'></i>
                        </a>
                        <ul class="dropdown-menu shadow rounded-3">

                            <!-- Submenu: Nearby Medicals -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Nearby Medicals</a>
                                <ul class="dropdown-menu shadow rounded-3 position-absolute start-100 top-0 mt-0">
                                    <li><a class="dropdown-item" href="#">Within 1 km</a></li>
                                    <li><a class="dropdown-item" href="#">Within 5 km</a></li>
                                    <li><a class="dropdown-item" href="#">Within 10 km</a></li>
                                </ul>
                            </li>

                            <!-- Submenu: 24/7 Pharmacy -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">24/7 Pharmacy</a>
                                <ul class="dropdown-menu shadow rounded-3 position-absolute start-100 top-0 mt-0">
                                    <li><a class="dropdown-item" href="#">All Night Services</a></li>
                                    <li><a class="dropdown-item" href="#">Emergency Delivery</a></li>
                                </ul>
                            </li>

                            <!-- other submenu -->
                            <li><a class="dropdown-item" href="#">Top Rated</a></li>
                            <li><a class="dropdown-item" href="#">Home Delivery</a></li>
                        </ul>
                    </li>

                    <!-- Clinic bar -->
                    <li class="nav-item dropdown"><a class="nav-link fw-semibold d-flex align-items-center gap-1"
                            href="#">
                            Clinics <i class='bx bx-chevron-up arrow-icon fs-4'></i></a>
                        <ul class="dropdown-menu shadow rounded-3">

                            <!-- Submenu: Primary Care Clinics -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Primary care clinics</a>
                            </li>

                            <!-- Submenu: Dermatologist -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Specialized clinics</a>
                            </li>

                            <!-- Submenu: Cardiologist -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Mental health clinics</a>
                            </li>

                            <!-- Submenu: Allergists -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Retail clinics</a>
                            </li>

                            <!-- Submenu: others -->
                            <li class="dropdown-submenu position-relative">
                                <a class="dropdown-item dropdown-toggle" href="#">Others</a>
                                <ul class="dropdown-menu shadow rounded-3 position-absolute start-10 top-0 mt-0">
                                    <li><a class="dropdown-item" href="#">Sexual health clinics</a></li>
                                    <li><a class="dropdown-item" href="#">Addiction services clinics</a></li>
                                    <li><a class="dropdown-item" href="#">Community health clinics</a></li>
                                    <li><a class="dropdown-item" href="#">Endocrinologist</a></li>
                                    <li><a class="dropdown-item" href="#">Dialysis clinics</a></li>
                                    <li><a class="dropdown-item" href="#">More</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <!-- Medicine bar -->
                    <li class="nav-item"><a class="nav-link without-arrow  fw-semibold"
                            href="medicine.html">Medicines</a></li>
                </ul>
            </div>
        </div>

        <!-- Mobile Offcanvas -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="MobileMenu">
            <div class="offcanvas-header">
                <h3 class="offcanvas-title fw-bold text-primary">HealthBridge</h3>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
                    <hr>
                    <li class="nav-item"><a class="nav-link" href="#">Appointment Booking</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Hospitals</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Doctors</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Medicals</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Clinics</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Medicines</a></li>
                    <hr>
                    <li class="nav-item"><a href="login.html" class="btn btn-outline-dark w-100 mb-2">Login</a>
                    </li>
                    <li class="nav-item"><a href="signup.html" class="btn btn-primary w-100 text-white">Sign Up</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="py-5 bg-light text-center">
        <div class="container">
            <h1 class="text-primary fw-bold mb-4">üè• HealthBridge Chat Assistant</h1>
            <p class="text-muted fs-5">
                Your 24/7 Virtual Health Assistant - MediAssist is here to help with appointments, medical queries, and
                healthcare support.
            </p>
        </div>
    </section>

    <!-- Chat Interface Section -->
    <section id="chat-section" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-xl-6">
                    <!-- Chat Container -->
                    <div class="card shadow-lg rounded-4 overflow-hidden position-relative" style="height: 600px;">
                        <!-- Chat Header -->
                        <div class="card-header bg-primary text-white p-3 position-sticky top-0" style="z-index: 10;">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <div class="bg-success rounded-circle" style="width: 12px; height: 12px;"></div>
                                </div>
                                <div>
                                    <h5 class="mb-0 fw-bold">MediAssist</h5>
                                    <small class="opacity-75">Your Virtual Health Assistant</small>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Messages Container -->
                        <div class="position-relative"
                            style="height: calc(600px - 200px); display: flex; flex-direction: column;">
                            <!-- Messages Area -->
                            <div class="flex-grow-1 overflow-auto p-3" id="chatMessages" style="max-height: 100%;">
                                <!-- Welcome Message -->
                                <div class="mb-4">
                                    <div class="message bot">
                                        <div class="bot-name">MediAssist</div>
                                        <div>
                                            <h6 class="text-primary mb-2">üëã Hi! Welcome to HealthBridge</h6>
                                            <p class="mb-2">I'm MediAssist, your virtual health assistant.</p>

                                            <div class="row g-2 mb-3">
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">1Ô∏è‚É£ Patient registration</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">2Ô∏è‚É£ Booking appointments</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">3Ô∏è‚É£ Doctor availability</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">4Ô∏è‚É£ Medical history</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">5Ô∏è‚É£ Prescriptions</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="bg-white rounded-2 p-2 text-center small">
                                                        <div class="fw-semibold">6Ô∏è‚É£ Medicine information</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <p class="mb-0 text-primary fw-semibold">üí¨ How can I assist you today?</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Typing Indicator -->
                            <div class="px-3 pb-2" id="typingIndicator" style="display: none;">
                                <div class="d-flex align-items-center">
                                    <div class="bg-light rounded-3 px-3 py-2">
                                        <div class="d-flex gap-1">
                                            <div class="bg-secondary rounded-circle"
                                                style="width: 6px; height: 6px; animation: pulse 1.5s ease-in-out infinite;">
                                            </div>
                                            <div class="bg-secondary rounded-circle"
                                                style="width: 6px; height: 6px; animation: pulse 1.5s ease-in-out 0.5s infinite;">
                                            </div>
                                            <div class="bg-secondary rounded-circle"
                                                style="width: 6px; height: 6px; animation: pulse 1.5s ease-in-out 1s infinite;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions - Fixed at bottom -->
                        <div class="px-3 py-2 bg-light border-top position-sticky bottom-0" style="z-index: 5;">
                            <div class="row g-1 mb-2">
                                <div class="col-6">
                                    <button class="btn btn-outline-primary btn-sm w-100"
                                        onclick="sendQuickMessage('Book an appointment')">
                                        üìÖ Book Appointment
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-outline-primary btn-sm w-100"
                                        onclick="sendQuickMessage('Check doctor availability')">
                                        üë®‚Äç‚öïÔ∏è Doctors
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-outline-primary btn-sm w-100"
                                        onclick="sendQuickMessage('Show my medical history')">
                                        üìã History
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-outline-primary btn-sm w-100"
                                        onclick="sendQuickMessage('Patient registration')">
                                        üë§ Register
                                    </button>
                                </div>
                            </div>

                            <!-- Chat Input -->
                            <div class="input-group">
                                <input type="text" class="form-control" id="messageInput"
                                    placeholder="Type your message here..." onkeypress="handleKeyPress(event)"
                                    style="border-radius: 20px 0 0 20px;">
                                <button class="btn btn-success" id="voiceButton" onclick="startVoiceCall()" disabled
                                    title="Voice feature loading...">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button class="btn btn-primary" onclick="sendMessage()"
                                    style="border-radius: 0 20px 20px 0;">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <small class="text-muted mt-1 d-block text-center">üí° Try voice chat - click the microphone
                                button!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Features Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold text-dark">MediAssist Features</h2>
                <p class="text-muted">Comprehensive healthcare assistance at your fingertips</p>
            </div>
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <div class="p-4 bg-white rounded-4 shadow-sm h-100">
                        <i class="fas fa-calendar-check fa-2x text-primary mb-3"></i>
                        <h5 class="fw-semibold">Smart Appointment Booking</h5>
                        <p class="text-muted">Book appointments with top doctors instantly. Check availability and get
                            confirmed slots in real-time.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="p-4 bg-white rounded-4 shadow-sm h-100">
                        <i class="fas fa-pills fa-2x text-success mb-3"></i>
                        <h5 class="fw-semibold">Medicine Information</h5>
                        <p class="text-muted">Get detailed information about medicines, dosages, and interactions for
                            various health conditions.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="p-4 bg-white rounded-4 shadow-sm h-100">
                        <i class="fas fa-user-md fa-2x text-warning mb-3"></i>
                        <h5 class="fw-semibold">24/7 Health Support</h5>
                        <p class="text-muted">Round-the-clock assistance for your health queries, medical history, and
                            prescription management.</p>
                    </div>
                </div>
            </div>
            <div class="text-center mt-5 mb-5">
                <button type="button" id="backHomeBtn" class="btn btn-primary ms-3"><i
                        class="fas fa-arrow-left me-2"></i>Back
                    to Home</button>
            </div>
        </div>
    </section>

    <footer class="bg-dark text-white pt-5 pb-4">
        <div class="container">

            <div class="row">
                <!-- HealthBridge Info -->
                <div class="col-md-4 mb-4">
                    <h5 class="text-uppercase fw-bold mb-3">
                        <i class='bx bxs-heart-circle text-danger me-2'></i>HealthBridge
                    </h5>
                    <p>
                        HealthBridge is your trusted healthcare partner. We connect patients with top doctors, ensuring
                        quality care, timely appointments, and health tips ‚Äî all in one place.
                    </p>
                </div>

                <!-- Quick Links -->
                <div class="col-md-2 quick-links mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">Quick Links</h6>
                    <ul class="list-unstyled">
                        <li><a href="html/about.html">About Us</a></li>
                        <li><a href="#doctors">Doctors</a></li>
                        <li><a href="html/contact.html">Services</a></li>
                        <li><a href="html/appointment-booking.html">Appointments</a></li>
                        <li><a href="#faq">FAQs</a></li>
                        <li><a href="html/contact.html">Contact</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="col-md-3 mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">Contact</h6>
                    <p><i class='bx bxs-map-pin me-2'></i> Amity University, Gwalior, MP</p>
                    <p><i class='bx bxs-envelope me-2'></i> support@healthbridge.com</p>
                    <p><i class='bx bxs-phone-call me-2'></i> +91 98765 43210</p>
                    <p><i class='bx bxs-time-five me-2'></i> Mon - Sat: 9 AM - 8 PM</p>
                </div>

                <!-- Newsletter & Social -->
                <div class="col-md-3 mb-4">
                    <h6 class="text-uppercase fw-bold mb-3">Subscribe</h6>
                    <p>Stay updated with health tips and news.</p>
                    <form>
                        <div class="input-group mb-2">
                            <input type="email" class="form-control" placeholder="Your email">
                            <button class="btn btn-outline-light" type="submit">Subscribe</button>
                        </div>
                    </form>
                    <div class="mt-3">
                        <a href="https://www.facebook.com" class="text-primary me-3 fs-3"><i
                                class='bx bxl-facebook-circle'></i></a>
                        <a href="https://www.x.com" class="text-white me-3 fs-3"><i class='bx bxl-twitter'></i></a>
                        <a href="https://www.instagram.com/" class="text-danger me-3 fs-3"><i
                                class='bx bxl-instagram'></i></a>
                        <a href="https://www.linkedin.com" class="text-primary fs-3"><i
                                class='bx bxl-linkedin-square'></i></a>
                    </div>
                </div>
            </div>

            <hr class="text-secondary">

            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 <strong>HealthBridge</strong>. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Designed By ‚ù§Ô∏è HealthBridge Team</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script src="../script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script>
        // VAPI Configuration
        const VAPI_PUBLIC_KEY = 'ca9ef318-05b0-4010-939a-e8ee43c1eadb';
        const VAPI_ASSISTANT_ID = 'your-assistant-id'; // You'll need to create this in VAPI dashboard

        // Initialize VAPI
        let vapi;
        let isVapiLoaded = false;
        let isCallActive = false;
        let currentConversation = [];

        // Load VAPI SDK
        function loadVapiSDK() {
            return new Promise((resolve, reject) => {
                if (window.Vapi) {
                    resolve();
                    return;
                }

                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/@vapi-ai/web@latest/dist/index.js';
                script.onload = () => {
                    console.log('VAPI SDK loaded successfully');
                    resolve();
                };
                script.onerror = () => {
                    console.error('Failed to load VAPI SDK');
                    reject(new Error('Failed to load VAPI SDK'));
                };
                document.head.appendChild(script);
            });
        }

        // Initialize VAPI client
        async function initializeVapi() {
            try {
                await loadVapiSDK();

                vapi = new window.Vapi(VAPI_PUBLIC_KEY);
                isVapiLoaded = true;

                // Set up event listeners
                setupVapiEventListeners();

                console.log('VAPI initialized successfully');

                // Enable voice button
                const voiceBtn = document.getElementById('voiceButton');
                if (voiceBtn) {
                    voiceBtn.disabled = false;
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                }

            } catch (error) {
                console.error('Failed to initialize VAPI:', error);
                showErrorMessage('Voice feature is currently unavailable');
            }
        }

        // Set up VAPI event listeners
        function setupVapiEventListeners() {
            if (!vapi) return;

            // Call started
            vapi.on('call-start', () => {
                console.log('Call started');
                isCallActive = true;
                updateVoiceButton(true);
                showTypingIndicator();
                addBotMessage('üé§ Voice call started. I\'m listening...');
            });

            // Call ended
            vapi.on('call-end', (callData) => {
                console.log('Call ended:', callData);
                isCallActive = false;
                updateVoiceButton(false);
                hideTypingIndicator();
                addBotMessage('üëã Voice call ended. You can continue typing or start another voice call.');
            });

            // Speech started (user started speaking)
            vapi.on('speech-start', () => {
                console.log('User started speaking');
                showTypingIndicator('Listening...');
            });

            // Speech ended (user stopped speaking)
            vapi.on('speech-end', () => {
                console.log('User stopped speaking');
                showTypingIndicator('Processing...');
            });

            // Message received from assistant
            vapi.on('message', (message) => {
                console.log('Message received:', message);

                if (message.type === 'transcript' && message.transcriptType === 'final') {
                    if (message.role === 'user') {
                        // User's speech transcript
                        addUserMessage(message.transcript);
                    } else if (message.role === 'assistant') {
                        // Assistant's response
                        hideTypingIndicator();
                        addBotMessage(message.transcript);
                    }
                }
            });

            // Error handling
            vapi.on('error', (error) => {
                console.error('VAPI Error:', error);
                isCallActive = false;
                updateVoiceButton(false);
                hideTypingIndicator();
                showErrorMessage('Voice call error: ' + error.message);
            });
        }

        // Start voice call
        async function startVoiceCall() {
            if (!isVapiLoaded) {
                showErrorMessage('Voice feature is not ready yet');
                return;
            }

            if (isCallActive) {
                // End current call
                vapi.stop();
                return;
            }

            try {
                // Start call with assistant configuration
                await vapi.start({
                    // If you have an assistant ID, use it:
                    // assistantId: VAPI_ASSISTANT_ID,

                    // Or configure the assistant inline:
                    assistant: {
                        model: {
                            provider: 'openai',
                            model: 'gpt-3.5-turbo',
                            messages: [
                                {
                                    role: 'system',
                                    content: `You are MediAssist, a virtual health assistant for HealthBridge. You help patients with:
                            - Appointment booking
                            - Doctor availability
                            - Medical information
                            - Patient registration
                            - Prescription queries
                            - General health questions
                            
                            Be helpful, professional, and empathetic. Keep responses concise for voice interaction.
                            If asked about serious medical conditions, always recommend consulting with a real doctor.`
                                }
                            ]
                        },
                        voice: {
                            provider: 'playht',
                            voiceId: 'jennifer' // You can change this to other available voices
                        },
                        firstMessage: "Hello! I'm MediAssist, your virtual health assistant. How can I help you today?"
                    }
                });

            } catch (error) {
                console.error('Failed to start voice call:', error);
                showErrorMessage('Failed to start voice call: ' + error.message);
            }
        }

        // Update voice button appearance
        function updateVoiceButton(isActive) {
            const voiceBtn = document.getElementById('voiceButton');
            if (!voiceBtn) return;

            if (isActive) {
                voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
                voiceBtn.classList.add('btn-danger');
                voiceBtn.classList.remove('btn-success');
                voiceBtn.title = 'Stop Voice Call';
            } else {
                voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                voiceBtn.classList.add('btn-success');
                voiceBtn.classList.remove('btn-danger');
                voiceBtn.title = 'Start Voice Call';
            }
        }

        // Existing chat functions (updated to work with VAPI)
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();

            if (message === '') return;

            addUserMessage(message);
            messageInput.value = '';

            // Simulate bot response (replace with actual backend integration)
            setTimeout(() => {
                generateBotResponse(message);
            }, 1000);
        }

        function sendQuickMessage(message) {
            addUserMessage(message);
            setTimeout(() => {
                generateBotResponse(message);
            }, 1000);
        }

        function addUserMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function addBotMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';

            const botName = document.createElement('div');
            botName.className = 'bot-name';
            botName.textContent = 'MediAssist';

            const botContent = document.createElement('div');
            botContent.innerHTML = message;

            messageDiv.appendChild(botName);
            messageDiv.appendChild(botContent);
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function generateBotResponse(userMessage) {
            showTypingIndicator();

            let response = '';
            const lowerMessage = userMessage.toLowerCase();

            // Healthcare-specific responses
            if (lowerMessage.includes('appointment') || lowerMessage.includes('book')) {
                response = `üìÖ <strong>Appointment Booking</strong><br>
        I can help you book an appointment! Here's what I need:<br>
        ‚Ä¢ Preferred doctor or specialty<br>
        ‚Ä¢ Preferred date and time<br>
        ‚Ä¢ Type of consultation (in-person/online)<br><br>
        Which doctor or specialty would you like to see?`;
            } else if (lowerMessage.includes('doctor') || lowerMessage.includes('availability')) {
                response = `üë®‚Äç‚öïÔ∏è <strong>Doctor Availability</strong><br>
        Our available specialists include:<br>
        ‚Ä¢ Dr. Smith - Cardiology (Mon-Fri 9AM-5PM)<br>
        ‚Ä¢ Dr. Johnson - Dermatology (Tue-Sat 10AM-6PM)<br>
        ‚Ä¢ Dr. Williams - General Medicine (Mon-Sun 8AM-8PM)<br><br>
        Which specialist interests you?`;
            } else if (lowerMessage.includes('medicine') || lowerMessage.includes('medication') || lowerMessage.includes('prescription')) {
                response = `üíä <strong>Medicine Information</strong><br>
        I can provide information about:<br>
        ‚Ä¢ Common medications and their uses<br>
        ‚Ä¢ Dosage guidelines<br>
        ‚Ä¢ Potential side effects<br>
        ‚Ä¢ Drug interactions<br><br>
        <em>‚ö†Ô∏è Always consult your doctor before starting any medication.</em>`;
            } else if (lowerMessage.includes('register') || lowerMessage.includes('registration')) {
                response = `üë§ <strong>Patient Registration</strong><br>
        To register as a new patient, I'll need:<br>
        ‚Ä¢ Full name and contact details<br>
        ‚Ä¢ Date of birth<br>
        ‚Ä¢ Insurance information<br>
        ‚Ä¢ Emergency contact<br><br>
        Would you like to start the registration process?`;
            } else if (lowerMessage.includes('history') || lowerMessage.includes('medical history')) {
                response = `üìã <strong>Medical History</strong><br>
        Your medical history helps doctors provide better care. It includes:<br>
        ‚Ä¢ Previous diagnoses<br>
        ‚Ä¢ Current medications<br>
        ‚Ä¢ Allergies and reactions<br>
        ‚Ä¢ Family medical history<br><br>
        Please log in to view your personal medical records.`;
            } else if (lowerMessage.includes('diabetes')) {
                response = `ü©∫ <strong>Diabetes Information</strong><br>
        Common diabetes medications include:<br>
        ‚Ä¢ <strong>Metformin</strong> - First-line treatment for Type 2<br>
        ‚Ä¢ <strong>Insulin</strong> - Essential for Type 1, sometimes Type 2<br>
        ‚Ä¢ <strong>Glipizide</strong> - Helps pancreas produce more insulin<br><br>
        <em>‚ö†Ô∏è Please consult an endocrinologist for personalized treatment.</em>`;
            } else if (lowerMessage.includes('emergency') || lowerMessage.includes('urgent')) {
                response = `üö® <strong>Emergency Services</strong><br>
        For medical emergencies:<br>
        ‚Ä¢ Call 108 (Emergency Medical Services)<br>
        ‚Ä¢ Visit nearest emergency room<br>
        ‚Ä¢ Our 24/7 helpline: +91 98765 43210<br><br>
        <strong>This chat is not for medical emergencies!</strong>`;
            } else {
                response = `Thank you for your message! üòä<br><br>
        I'm here to help with:<br>
        ‚Ä¢ üìÖ Booking appointments<br>
        ‚Ä¢ üë®‚Äç‚öïÔ∏è Doctor information<br>
        ‚Ä¢ üíä Medicine queries<br>
        ‚Ä¢ üë§ Patient registration<br>
        ‚Ä¢ üìã Medical history<br><br>
        How can I assist you today?`;
            }

            setTimeout(() => {
                hideTypingIndicator();
                addBotMessage(response);
            }, 1500);
        }

        function showTypingIndicator(text = 'MediAssist is typing...') {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.style.display = 'block';
                // You can update the text if needed
            }
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.style.display = 'none';
            }
        }

        function scrollToBottom() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function showErrorMessage(message) {
            addBotMessage(`‚ùå <strong>Error:</strong> ${message}`);
        }

        // Back to home button functionality
        document.getElementById('backHomeBtn')?.addEventListener('click', function () {
            window.location.href = '../index.html';
        });

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function () {
            console.log('HealthBridge Chat loaded');

            // Initialize VAPI
            initializeVapi();

            // Focus on message input
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.focus();
            }
        });

        // Clean up on page unload
        window.addEventListener('beforeunload', function () {
            if (vapi && isCallActive) {
                vapi.stop();
            }
        });
    </script>
</body>

</html>